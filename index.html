<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="calculator">
            <input type="text" placeholder="0" id="outputscreen">
            <button class="voice-button" onclick="startListening()">ðŸŽ¤</button> <!-- Voice input button -->

            <button onclick="Clear()">Cl</button>
            <button onclick="del()">DEL</button>
            <button onclick="display('%')">%</button> 
            <button onclick="display('/')">/</button>
            <button onclick="display('7')">7</button>
            <button onclick="display('8')">8</7button>
            <button onclick="display('9')">9</button>
            <button onclick="display('*')">*</button>
            <button onclick="display('4')">4</button>
            <button onclick="display('5')">5</button>
            <button onclick="display('6')">6</button>
            <button onclick="display('-')">-</button>
            <button onclick="display('1')">1</button>
            <button onclick="display('2')">2</button>
            <button onclick="display('3')">3</button>
            <button onclick="display('+')">+</button>
            <button onclick="display('.')">.</button>
            <button onclick="display('0')">0</button>
            <button onclick="calculate()" class="equal">=</button>
        </div>
    </div>
   
   
    
</body>
</html>
let outputScreen = document.getElementById("outputscreen");

function display(num) {
    outputScreen.value += num;
}

function calculate() {
    try {
        outputScreen.value = eval(outputScreen.value);
        speak(outputScreen.value); // Speak the result
    } catch (err) {
        alert("Invalid");
    }
}

function Clear() {
    outputScreen.value = "";
}

function del() {
    outputScreen.value = outputScreen.value.slice(0, -1);
}

function speak(text) {
    const utterance = new SpeechSynthesisUtterance(text);
    window.speechSynthesis.speak(utterance);
}

// Voice recognition functionality
const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
recognition.continuous = false;
recognition.interimResults = false;

function startListening() {
    recognition.start();
}

recognition.onresult = (event) => {
    const transcript = event.results[0][0].transcript.toLowerCase(); // Convert to lowercase for easier matching
    console.log(transcript); // Debugging line to see the spoken command

    // Parse the command
    const words = transcript.split(" ");
    
    // Handle multiplication
    if (words.includes("multiply") || words.includes("times")) {
        const index = words.indexOf("multiply") !== -1 ? words.indexOf("multiply") : words.indexOf("times");
        const num1 = parseFloat(words[index - 1]);
        const num2 = parseFloat(words[index + 1]);

        if (!isNaN(num1) && !isNaN(num2)) {
            const result = num1 * num2;
            outputScreen.value = result;
            speak(result); // Speak the result
        } else {
            speak("Please say two numbers to multiply.");
        }
    }
    // Handle division
    else if (words.includes("divide") || words.includes("over")) {
        const index = words.indexOf("divide") !== -1 ? words.indexOf("divide") : words.indexOf("over");
        const num1 = parseFloat(words[index - 1]);
        const num2 = parseFloat(words[index + 1]);

        if (!isNaN(num1) && !isNaN(num2)) {
            if (num2 !== 0) {
                const result = num1 / num2;
                outputScreen.value = result;
                speak(result); // Speak the result
            } else {
                speak("Cannot divide by zero.");
            }
        } else {
            speak("Please say two numbers to divide.");
        }
    }
    // Handle percentage
    else if (words.includes("percent") || words.includes("percentage")) {
        const index = words.indexOf("percent") !== -1 ? words.indexOf("percent") : words.indexOf("percentage");
        const num = parseFloat(words[index - 1]);

        if (!isNaN(num)) {
            const result = num / 100; // Calculate percentage
            outputScreen.value = result;
            speak(result); // Speak the result
        } else {
            speak("Please say a number followed by percent.");
        }
    } 
    else {
        // Handle other calculations
        outputScreen.value = transcript; // For direct expressions like "2 + 2"
        calculate(); // Automatically calculate if needed
    }
};

recognition.onerror = (event) => {
    console.error("Error occurred in recognition: " + event.error);
};
</script>
